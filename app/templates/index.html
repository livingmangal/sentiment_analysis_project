<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sentiment Analysis</title>
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
</head>
<body>
    <div class="bg-shape shape-1"></div>
    <div class="bg-shape shape-2"></div>

    <div class="app-wrapper">
        <header>
            <div class="logo-area">
                <h1>Sentiment<span class="highlight"> Analysis</span></h1>
            </div>
            <p class="subtitle">Advanced Text Emotion Detection</p>
        </header>

        <main class="main-layout">
            <div class="content-grid">
                <!-- Left Column: Input -->
                <section class="input-section glass-card">
                    <form id="sentimentForm">
                        <div class="form-header">
                            <label for="text">Analysis Input</label>
                            <div class="char-counter" id="charCounter">0 / 500</div>
                        </div>
                        
                        <div class="input-container">
                            <textarea
                                id="text"
                                name="text"
                                required
                                placeholder="Paste your text here to analyze emotions..."
                                maxlength="500"
                                rows="5"
                            ></textarea>
                            <button type="button" class="clear-btn" id="clearButton" title="Clear">√ó</button>
                        </div>

                        <div class="action-area">
                            <p class="hint">Hit <kbd>Ctrl</kbd> + <kbd>Enter</kbd> to analyze</p>
                            <button type="submit" id="submitBtn">
                                <span>Analyze Text</span>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
                                </svg>
                            </button>
                        </div>
                    </form>
                </section>

                <!-- Right Column: Result -->
                <section class="result-section glass-card" id="resultSection">
                    <div class="placeholder-content">
                        <div class="pulse-circle">üîç</div>
                        <h3>Ready to Analyze</h3>
                        <p>Your results will appear here with detailed confidence scoring.</p>
                    </div>
                </section>
            </div>

            <!-- Analytics Section -->
            <section class="analytics-container glass-card">
                <div class="analytics-header">
                    <div>
                        <h2>Sentiment Trends</h2>
                        <p>Historical analysis of text emotions</p>
                    </div>
                    <div class="analytics-actions">
                        <button id="clearHistoryBtn" class="clear-history-btn">Clear History</button>
                        <button id="exportBtn" class="export-btn">Export History (CSV)</button>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="sentimentChart"></canvas>
                </div>
            </section>

            <!-- History Sidebar (Optional, if we want to keep it) -->
            <aside class="history-sidebar glass-card" id="historySidebar">
                <div class="history-header">
                    <h3>History</h3>
                    <button class="toggle-history" id="toggleHistory">
                        <span id="toggleIcon">‚ñº</span>
                    </button>
                </div>
                <div class="history-content" id="historyContent">
                    <div class="history-loading" id="historyLoading">Loading...</div>
                    <div class="history-empty" id="historyEmpty" style="display: none;">
                        <p>No predictions yet</p>
                    </div>
                    <div class="history-list" id="historyList"></div>
                </div>
            </aside>
        </main>

        <footer>
            <p>Built with <strong>Flask</strong> & <strong>PyTorch</strong></p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
